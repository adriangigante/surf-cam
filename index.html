<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Surf Cam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.2.6/mediaelementplayer.css">
    <link rel="stylesheet" href="../dist/airplay/airplay.css">
    <link rel="stylesheet" href="demo.css">
</head>
<body>
    <div id="container">

        <h1>Surf Cam</h1>

        <div id="out-contain">
            <iframe id="output" frameborder="0" height="175" width="400"></iframe>
        </div>

        <div class="media-wrapper">
            Bondi South
            <video id="player1" width="480" height="270">
                <source src="https://cf-stream.coastalwatch.com/cw/bondicamera.stream/chunklist_w640007274.m3u8" type="application/x-mpegURL">
            </video>
        </div>

        <p>

        <div class="media-wrapper">
            Bondi North
            <video id="player2" width="480" height="270">
                <source src="https://cf-stream.coastalwatch.com/cw/nbondicamera.stream/playlist.m3u8" type="application/x-mpegURL">
            </video>
        </div>

        <p>

        <div class="media-wrapper">
            Maroubra
            <video id="player3" width="480" height="270">
                <source src="https://cf-stream.coastalwatch.com/cw/maroubracamera.stream/chunklist.m3u8" type="application/x-mpegURL">
            </video>
        </div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mediaelement/4.2.6/mediaelement-and-player.min.js"></script>
    <script src="../dist/airplay/airplay.js"></script>
    <script>
	    var player1 = new MediaElementPlayer('player1', { 
            pauseOtherPlayers: false,
            features: ['fullscreen'],
            autoplay: true,
        });

        var player2 = new MediaElementPlayer('player2', {
            pauseOtherPlayers: false,
            features: ['fullscreen'],
        });
     
        var player3 = new MediaElementPlayer('player3', {
            pauseOtherPlayers: false,
            features: ['fullscreen'],
        });

    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        var jsonpText = "";
        jsonpText = $.getJSON('http://www.whateverorigin.org/get?url=' + encodeURIComponent('http://www.swellnet.com/reports/australia/new-south-wales/eastern-beaches') + '&callback=?', function(data){
                var iframe = $("#output")[0];//.html(data.contents);
                var doc = iframe.document;
                if(iframe.contentDocument) {
                    doc = iframe.contentDocument;
                } else if(iframe.contentWindow) {
                    doc = iframe.contentWindow.document;
                }

                var str = null;
                str = data.contents.split('Surf:');
                str = str[1].split('</span>');
                str = str[1].split('>');
                var surf =  str[1];
                //alert(surf);

                var str = null;
                str = data.contents.split('Winds:');
                str = str[1].split('</span>');
                str = str[1].split('>');
                var winds = str[1];
                //alert(winds);
                
                var str = null;
                str = data.contents.split('Weather:');
                str = str[1].split('</span>');
                str = str[1].split('>');
                var weather = str[1];
                //alert(weather);

                var str = null;
                str = data.contents.split('Rating:');
                str = str[1].split('</span>');
                str = str[1].split('>');
                var rating = str[1];
                //alert(rating);

                var str = null;
                str = data.contents.split('views-field views-field-body');
                str = str[1].split('<p>');
                str = str[1].split('</p>');
                var report = str[0];
                //alert(report);

                var fullReport = 
                    "Surf: " + surf + "<br>" +
                    "Winds: " + winds + "<br>" +
                    "Weather: " + weather + "<br>" +
                    "Rating: " + rating + "<br>" +
                    report;
                //alert(fullReport);

                doc.open();
                //doc.writeln(data.contents);
                doc.writeln(fullReport);
                doc.close();
            }
        );
    </script>
</body>
</html>